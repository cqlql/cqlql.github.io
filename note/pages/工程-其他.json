{"article":"<h1 data-index=0>brunch</h1><h1 data-index=1>gulp</h1><h2 data-index=2>插件</h2><h3 data-index=3>css 压缩：gulp-clean-css</h3><h3 data-index=4>文件重命名：gulp-rename</h3><p>比如给压缩文件加<code>.min</code></p><pre><code class=lang-js><span class=hljs-keyword>return</span> gulp.src(<span class=hljs-string>'src/**/*.css'</span>)\n    .pipe(postcss(postPlugins))\n    .pipe(gulp.dest(<span class=hljs-string>'dist'</span>))\n    .pipe(cleanCSS())\n    .pipe(rename({<span class=hljs-attr>suffix</span>:<span class=hljs-string>'.min'</span>}))\n    .pipe(gulp.dest(<span class=hljs-string>'dist'</span>));\n</code></pre><h1 data-index=5>html 压缩</h1><p><a href=https://github.com/kangax/html-minifier>https://github.com/kangax/html-minifier</a></p><h1 data-index=6>rollup.config 常用</h1><p><a href=http://www.tuicool.com/articles/q26jEjz>参考网址</a></p><pre><code class=lang-js><span class=hljs-keyword>import</span> resolve <span class=hljs-keyword>from</span> <span class=hljs-string>'rollup-plugin-node-resolve'</span>\n<span class=hljs-keyword>import</span> commonjs <span class=hljs-keyword>from</span> <span class=hljs-string>'rollup-plugin-commonjs'</span>\n<span class=hljs-keyword>import</span> babel <span class=hljs-keyword>from</span> <span class=hljs-string>'rollup-plugin-babel'</span>\n<span class=hljs-keyword>import</span> uglify <span class=hljs-keyword>from</span> <span class=hljs-string>'rollup-plugin-uglify'</span>\n\n<span class=hljs-keyword>export</span> <span class=hljs-keyword>default</span> {\n    <span class=hljs-attr>entry</span>: <span class=hljs-string>'src/index.js'</span>,\n    <span class=hljs-attr>dest</span>: <span class=hljs-string>'dist/katex.min.js'</span>, <span class=hljs-comment>// equivalent to --output</span>\n    format: <span class=hljs-string>'iife'</span>,\n    <span class=hljs-attr>plugins</span>: [\n        resolve({\n            <span class=hljs-attr>customResolveOptions</span>: {\n                <span class=hljs-attr>moduleDirectory</span>: <span class=hljs-string>'node_modules'</span>\n            }\n        }),\n        babel({\n            <span class=hljs-attr>exclude</span>: [<span class=hljs-string>'node_modules/**'</span>,<span class=hljs-string>'./src/katex.min.js'</span>],\n        }),\n        uglify(),   <span class=hljs-comment>// 加入压缩代码</span>\n        commonjs()\n    ]\n}\n</code></pre><h1 data-index=7>rollup</h1><h2 data-index=8>只能使用 import 导入模块，但可通过插件改变</h2><p>通过 rollup-plugin-commonjs 插件使支持 require 模块</p><h2 data-index=9>外部模块不会解析成es5</h2><p>需借用 <a href=#rollup-plugin-babel>rollup-plugin-babel</a> 插件</p><h2 data-index=10>插件</h2><h3 data-index=11>rollup-plugin-node-resolve 打包外部模块</h3><p>允许将外部模块编译进来，比如把 node_modules 中的模块。当然，也可以自定义的模块。<br>只需指定一个文件夹名称，似乎会寻找硬盘的所有位置，很强大（指定路径将无效）</p><pre><code class=lang-js>plugins: [\n  resolve({\n    <span class=hljs-attr>customResolveOptions</span>: {\n      <span class=hljs-attr>moduleDirectory</span>: [<span class=hljs-string>'node_modules'</span>,<span class=hljs-string>'github'</span>]\n    }\n  })\n]\n</code></pre><h3 data-index=12>rollup-plugin-commonjs</h3><p>使支持 require 模块。否则只能 import 模块</p><h3 data-index=13>rollup-plugin-babel</h3><p>解析成es5代码。目前所知，必须使用<code>.babelrc</code>配置文件</p><pre><code class=lang-js><span class=hljs-selector-tag>export</span> <span class=hljs-selector-tag>default</span> {\n    <span class=hljs-attribute>plugins</span>: [\n        <span class=hljs-built_in>babel</span>({\n            // 使用数组，排除多个目录或文件\n            exclude: [<span class=hljs-string>'node_modules/**'</span>,<span class=hljs-string>'./src/katex.min.js'</span>],\n        })\n    ]\n}\n</code></pre><h2 data-index=14>rollup.config</h2><p>目前常用：</p><ul><li><code>cjs</code>: 打包成nodejs模块</li><li><code>iife</code>:<ul><li>构建成可通过 <code>&amp;lt;script&amp;gt;</code> 标签使用的js。</li><li>不能直接构建导出的模块</li></ul></li><li><code>umd</code>:<ul><li>browser(AMD+全局) + nodejs</li><li>需与moduleName选项一起使用</li><li>可直接构建模块</li></ul></li></ul><h1 data-index=15>各种打包工具选择</h1><p>新的打包工具？SystemJS Http 2不打包会更好？？</p><ol><li><p>目前还是使用webpack + rollup 改用api方式打包， 比较独立的页面应单独打包</p></li><li><p>个人独立模块使用rollup打包</p></li></ol><h2 data-index=16>js单独模块</h2><p>使用 <a href=https://github.com/rollup/rollup>rollup</a> 或者 <a href=https://github.com/substack/node-browserify>browserify</a> 打包<br><strong>并且使用npm规范编写模块</strong></p><h2 data-index=17>项目、单页应用打包</h2><p>可使用 <a href=https://doc.webpack-china.org/ >webpack</a></p><p>当然，也可用<a href=https://github.com/rollup/rollup>rollup</a> 或者 <a href=https://github.com/substack/node-browserify>browserify</a> + <a href=http://gulpjs.com/ >glup</a></p>","menu":"<div class=\"menu-item fold\"><div class=\"item\" data-index=\"0\"><i class=\"hidden\"></i><span class=\"txt\">brunch</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"1\"><i class=\"\"></i><span class=\"txt\">gulp</span></div><div class=\"list\"><div class=\"menu-item fold\"><div class=\"item\" data-index=\"2\"><i class=\"\"></i><span class=\"txt\">插件</span></div><div class=\"list\"><div class=\"menu-item fold\"><div class=\"item\" data-index=\"3\"><i class=\"hidden\"></i><span class=\"txt\">css 压缩：gulp-clean-css</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"4\"><i class=\"hidden\"></i><span class=\"txt\">文件重命名：gulp-rename</span></div><div class=\"list\"></div></div></div></div></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"5\"><i class=\"hidden\"></i><span class=\"txt\">html 压缩</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"6\"><i class=\"hidden\"></i><span class=\"txt\">rollup.config 常用</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"7\"><i class=\"\"></i><span class=\"txt\">rollup</span></div><div class=\"list\"><div class=\"menu-item fold\"><div class=\"item\" data-index=\"8\"><i class=\"hidden\"></i><span class=\"txt\">只能使用 import 导入模块，但可通过插件改变</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"9\"><i class=\"hidden\"></i><span class=\"txt\">外部模块不会解析成es5</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"10\"><i class=\"\"></i><span class=\"txt\">插件</span></div><div class=\"list\"><div class=\"menu-item fold\"><div class=\"item\" data-index=\"11\"><i class=\"hidden\"></i><span class=\"txt\">rollup-plugin-node-resolve 打包外部模块</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"12\"><i class=\"hidden\"></i><span class=\"txt\">rollup-plugin-commonjs</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"13\"><i class=\"hidden\"></i><span class=\"txt\">rollup-plugin-babel</span></div><div class=\"list\"></div></div></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"14\"><i class=\"hidden\"></i><span class=\"txt\">rollup.config</span></div><div class=\"list\"></div></div></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"15\"><i class=\"\"></i><span class=\"txt\">各种打包工具选择</span></div><div class=\"list\"><div class=\"menu-item fold\"><div class=\"item\" data-index=\"16\"><i class=\"hidden\"></i><span class=\"txt\">js单独模块</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"17\"><i class=\"hidden\"></i><span class=\"txt\">项目、单页应用打包</span></div><div class=\"list\"></div></div></div></div>"}