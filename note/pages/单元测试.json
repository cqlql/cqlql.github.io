{"article":"<h1 data-index=0>单元测试</h1><ul><li>测试管理工具：<a href=http://karma-runner.github.io/1.0/index.html>Karma</a></li><li>测试框架：<a href=https://mochajs.org/ >Mocha</a></li><li>断言库：Jest、Jasmine、<a href=http://chaijs.com/guide/ >chai.js</a></li><li>接口模拟 <a href=https://www.easy-mock.com/ >easy mock</a></li></ul><p>可以这么组合：karma + Mocha + chai.js、Karma + Jasmine</p><h2 data-index=1>写代码应注意</h2><p>让代码的每个单元都可单独测试</p><h2 data-index=2>好处</h2><ul><li>放心大胆重构：代码重构时可保证安全性，即保证功能完整</li><li>测试用例相当于API文档</li></ul><h2 data-index=3>webdriver 实验</h2><p><a href=https://www.npmjs.com/package/selenium-webdriver>可模拟浏览器点击的测试框架：selenium-webdriver</a></p><p><a href=http://seleniumhq.github.io/selenium/docs/api/javascript/module/selenium-webdriver/index_exports_WebElement.html>http://seleniumhq.github.io/selenium/docs/api/javascript/module/selenium-webdriver/index_exports_WebElement.html</a></p><pre><code class=lang-js><span class=hljs-keyword>var</span> webdriver = <span class=hljs-built_in>require</span>(<span class=hljs-string>'selenium-webdriver'</span>),\n    By = webdriver.By,\n    until = webdriver.until;\n\n<span class=hljs-keyword>var</span> driver = <span class=hljs-keyword>new</span> webdriver.Builder()\n    .forBrowser(<span class=hljs-string>'firefox'</span>)\n    .build();\n\ndriver.get(<span class=hljs-string>'https://www.baidu.com/'</span>);\ndriver.findElement(By.id(<span class=hljs-string>'kw'</span>)).sendKeys(<span class=hljs-string>'123'</span>);\ndriver.findElement(By.id(<span class=hljs-string>'su'</span>)).click();\ndriver.wait(until.titleIs(<span class=hljs-string>'百度一下，你就知道'</span>), <span class=hljs-number>1000</span>);\ndriver.quit();\n</code></pre><h2 data-index=4>参考学习</h2><p><a href=https://www.douban.com/note/334051223/ >为什么要做测试？karma的使用</a></p><p><a href=https://github.com/tmallfe/tmallfe.github.io/issues/37>https://github.com/tmallfe/tmallfe.github.io/issues/37</a></p><p><a href=http://www.jianshu.com/p/6726c0410650>http://www.jianshu.com/p/6726c0410650</a></p><p><a href=http://taobaofed.org/blog/2016/01/08/karma-origin/ >http://taobaofed.org/blog/2016/01/08/karma-origin/</a></p><h1 data-index=5>karma 测试管理工具</h1><h2 data-index=6>这里使用：</h2><ul><li>mocha：测试框架</li><li>chai：断言库</li><li>webpack：实现 es6 语法转换</li></ul><h2 data-index=7>需要安装的包</h2><p>测试相关：<br>mocha karma-mocha chai karma-chai</p><p>测试浏览器环境：<br>karma-chrome-launcher karma-phantomjs-launcher</p><p>es6 转换相关：<br>webpack <a href=https://www.npmjs.com/package/karma-webpack>karma-webpack</a> babel-core babel-loader babel-preset-env</p><h2 data-index=8>karma.config.js 参考</h2><p>这里说明一下，并不需要设置 plugins 选项</p><pre><code class=lang-js><span class=hljs-comment>// Karma configuration</span>\n\n<span class=hljs-keyword>let</span> path = <span class=hljs-built_in>require</span>(<span class=hljs-string>'path'</span>)\n\n<span class=hljs-built_in>module</span>.exports = <span class=hljs-function><span class=hljs-keyword>function</span>(<span class=hljs-params>config</span>) </span>{\n  config.set({\n\n    <span class=hljs-comment>// base path that will be used to resolve all patterns (eg. files, exclude)</span>\n    basePath: <span class=hljs-string>''</span>,\n\n\n    <span class=hljs-comment>// frameworks to use</span>\n    <span class=hljs-comment>// available frameworks: https://npmjs.org/browse/keyword/karma-adapter</span>\n    frameworks: [<span class=hljs-string>'mocha'</span>,<span class=hljs-string>'chai'</span>],\n\n\n    <span class=hljs-comment>// list of files / patterns to load in the browser</span>\n    files: [\n      <span class=hljs-string>'./test/*.js'</span>\n    ],\n\n\n    <span class=hljs-comment>// list of files to exclude</span>\n    <span class=hljs-comment>// exclude: [</span>\n    <span class=hljs-comment>//   'You can use glob patterns, eg. \"js/*.js\" or \"test/**/*Spec.js\".',</span>\n    <span class=hljs-comment>//   'You can use glob patterns, eg. \"js/*.js\" or \"test/**/*Spec.js\".'</span>\n    <span class=hljs-comment>// ],</span>\n\n    <span class=hljs-comment>// preprocess matching files before serving them to the browser</span>\n    <span class=hljs-comment>// available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor</span>\n    preprocessors: {\n        <span class=hljs-string>'./test/*.js'</span>:[<span class=hljs-string>'webpack'</span>]\n    },\n\n    <span class=hljs-attr>webpack</span>:{\n      <span class=hljs-attr>module</span>: {\n        <span class=hljs-comment>//加载器配置</span>\n        rules: [\n          {\n            <span class=hljs-attr>test</span>: <span class=hljs-regexp>/\\.js$/</span>,\n            <span class=hljs-attr>exclude</span>: <span class=hljs-regexp>/node_modules/</span>,\n            <span class=hljs-attr>loader</span>: <span class=hljs-string>'babel-loader'</span>,\n            <span class=hljs-attr>options</span>: {\n              <span class=hljs-string>\"presets\"</span>: [<span class=hljs-string>\"env\"</span>],\n            }\n          }\n        ]\n      },\n    },\n    <span class=hljs-attr>webpackMiddleware</span>: {\n      <span class=hljs-attr>noInfo</span>: <span class=hljs-literal>true</span>\n    },\n\n    <span class=hljs-comment>// test results reporter to use</span>\n    <span class=hljs-comment>// possible values: 'dots', 'progress'</span>\n    <span class=hljs-comment>// available reporters: https://npmjs.org/browse/keyword/karma-reporter</span>\n    reporters: [<span class=hljs-string>'progress'</span>],\n\n    <span class=hljs-comment>// web server port</span>\n    port: <span class=hljs-number>9876</span>,\n\n    <span class=hljs-comment>// enable / disable colors in the output (reporters and logs)</span>\n    colors: <span class=hljs-literal>true</span>,\n\n    <span class=hljs-comment>// level of logging</span>\n    <span class=hljs-comment>// possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG</span>\n    logLevel: config.LOG_INFO,\n\n    <span class=hljs-comment>// enable / disable watching file and executing tests whenever any file changes</span>\n    autoWatch: <span class=hljs-literal>true</span>,\n\n    <span class=hljs-comment>// start these browsers</span>\n    <span class=hljs-comment>// available browser launchers: https://npmjs.org/browse/keyword/karma-launcher</span>\n    browsers: [<span class=hljs-string>'Chrome'</span>, <span class=hljs-string>'PhantomJS'</span>],\n\n    <span class=hljs-comment>// Continuous Integration mode</span>\n    <span class=hljs-comment>// if true, Karma captures browsers, runs the tests and exits</span>\n    singleRun: <span class=hljs-literal>false</span>,\n\n    <span class=hljs-comment>// Concurrency level</span>\n    <span class=hljs-comment>// how many browser should be started simultaneous</span>\n    concurrency: <span class=hljs-literal>Infinity</span>\n  })\n}\n</code></pre><h2 data-index=9>问题解决，注意项：</h2><h3 data-index=10>karma 有依赖缺失问题：</h3><p>勿使用淘宝镜像命令 cnpm 安装。 <strong>可使用 yarn</strong>，速度也很快</p>","menu":"<div class=\"menu-item fold\"><div class=\"item\" data-index=\"0\"><i class=\"\"></i><span class=\"txt\">单元测试</span></div><div class=\"list\"><div class=\"menu-item fold\"><div class=\"item\" data-index=\"1\"><i class=\"hidden\"></i><span class=\"txt\">写代码应注意</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"2\"><i class=\"hidden\"></i><span class=\"txt\">好处</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"3\"><i class=\"hidden\"></i><span class=\"txt\">webdriver 实验</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"4\"><i class=\"hidden\"></i><span class=\"txt\">参考学习</span></div><div class=\"list\"></div></div></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"5\"><i class=\"\"></i><span class=\"txt\">karma 测试管理工具</span></div><div class=\"list\"><div class=\"menu-item fold\"><div class=\"item\" data-index=\"6\"><i class=\"hidden\"></i><span class=\"txt\">这里使用：</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"7\"><i class=\"hidden\"></i><span class=\"txt\">需要安装的包</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"8\"><i class=\"hidden\"></i><span class=\"txt\">karma.config.js 参考</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"9\"><i class=\"\"></i><span class=\"txt\">问题解决，注意项：</span></div><div class=\"list\"><div class=\"menu-item fold\"><div class=\"item\" data-index=\"10\"><i class=\"hidden\"></i><span class=\"txt\">karma 有依赖缺失问题：</span></div><div class=\"list\"></div></div></div></div></div></div>"}