{"article":"<section><h1 id=fs data-index=0>fs</h1><section><h2 id=文件列表(包括文件夹) data-index=1>文件列表(包括文件夹)</h2><section><h3 id=\"原生 readdir：只能当前目录，不寻找下级\" data-index=2>原生 readdir：只能当前目录，不寻找下级</h3><pre><code class=lang-js><span class=hljs-keyword>let</span> dirList = fs.readdirSync(<span class=hljs-string>'./dir'</span>) \n<span class=hljs-comment>// 返回值示例：</span>\n<span class=hljs-comment>// [\".DS_Store\",\"Update.exe\",\"version\",\"views_resources_200_percent.pak\",\"xinput1_3.dll\"]</span>\n</code></pre></section><section><h3 id=读取指定目录下的所有文件，支持过滤 data-index=3>读取指定目录下的所有文件，支持过滤</h3><p>使用 <a href=https://github.com/jergason/recursive-readdir>recursive-readdir</a>，但不会列出文件夹</p><p>需列出文件夹使用：<a href=https://github.com/bigstickcarpet/readdir-enhanced>readdir-enhanced</a></p></section></section><section><h2 id=是不是目录 data-index=4>是不是目录</h2><p>fs.statSync(path).isDirectory()</p></section><section><h2 id=\"读取文件 fs.readFile\" data-index=5>读取文件 fs.readFile</h2><p>读取不存在文件会报错</p><pre><code class=lang-js>fs.readFile(file[, options], callback)\nfs.readFileSync(file[, options])\n\n默认获取二进制数据。参数设置为utf8将获取文本数据\nfs.readFile(<span class=hljs-string>'note_data/index.html'</span>, <span class=hljs-string>'utf8'</span>, <span class=hljs-function><span class=hljs-keyword>function</span> (<span class=hljs-params>err, data</span>) </span>{\n    <span class=hljs-comment>// if (err) throw err;</span>\n    <span class=hljs-built_in>console</span>.log(<span class=hljs-built_in>arguments</span>);\n});\n</code></pre></section><section><h2 id=\"判断路径是否存在 fs.exists(path)\" data-index=6>判断路径是否存在 fs.exists(path)</h2><p>可以是目录，也可以是包含文件的路径</p><p>对应的同步方法<code>fs.existsSync(path)</code></p></section><section><h2 id=改名(文件名，目录名) data-index=7>改名(文件名，目录名)</h2><pre><code class=lang-js><span class=hljs-selector-tag>fs</span><span class=hljs-selector-class>.rename</span>(<span class=hljs-selector-tag>oldPath</span>, <span class=hljs-selector-tag>newPath</span>, <span class=hljs-selector-tag>callback</span>)\n<span class=hljs-selector-tag>fs</span><span class=hljs-selector-class>.renameSync</span>(<span class=hljs-selector-tag>oldPath</span>, <span class=hljs-selector-tag>newPath</span>)\n</code></pre><p>oldPath, newPath必须相同级数，可以完全一样，只能修改末级</p></section><section><h2 id=删除 data-index=8>删除</h2><section><h3 id=标准删 data-index=9>标准删</h3><p>fs.unlink(path, callback)<br>fs.unlinkSync(path)</p></section><section><h3 id=递归删：第三方扩展 data-index=10>递归删：第三方扩展</h3><p>删除指定目录下的所有文件和目录</p><p>使用 <a href=https://github.com/jprichardson/node-fs-extra>fs-extra</a>，或者使用 <a href=https://github.com/isaacs/rimraf>rimraf</a></p></section></section><section><h2 id=写文件 data-index=11>写文件</h2><p>将内容写入文件。 有文件将直接替换现有内容，没有将创建新的并写入</p><p>语法</p><pre><code class=lang-js><span class=hljs-selector-tag>fs</span><span class=hljs-selector-class>.writeFile</span>(<span class=hljs-selector-tag>file</span>, <span class=hljs-selector-tag>data</span><span class=hljs-selector-attr>[, options]</span>, <span class=hljs-selector-tag>callback</span>)\n<span class=hljs-selector-tag>fs</span><span class=hljs-selector-class>.writeFileSync</span>(<span class=hljs-selector-tag>file</span>, <span class=hljs-selector-tag>data</span><span class=hljs-selector-attr>[, options]</span>)\n</code></pre><p>例子</p><pre><code class=lang-js>fs.writeFile(<span class=hljs-string>'note_data/hello.txt'</span>, <span class=hljs-string>'hello'</span>,<span class=hljs-string>'utf8'</span>, <span class=hljs-function><span class=hljs-keyword>function</span>(<span class=hljs-params>err</span>) </span>{\n    <span class=hljs-keyword>if</span>(err) <span class=hljs-keyword>throw</span> err;\n    <span class=hljs-built_in>console</span>.log(<span class=hljs-string>'File write completed'</span>);\n});\n</code></pre></section><section><h2 id=copy data-index=12>copy</h2><p>使用 <a href=https://github.com/jprichardson/node-fs-extra>fs-extra</a></p><p><a href=https://github.com/jprichardson/node-fs-extra/blob/master/docs/copy.md>copy 文档</a></p><p><a href=https://github.com/jprichardson/node-fs-extra/blob/master/docs/copy-sync.md>copySync 文档</a></p><p>copySync 示例</p><pre><code class=lang-js><span class=hljs-keyword>const</span> fs = <span class=hljs-built_in>require</span>(<span class=hljs-string>'fs-extra'</span>)\n\n<span class=hljs-comment>// copy file</span>\nfs.copySync(<span class=hljs-string>'/tmp/myfile'</span>, <span class=hljs-string>'/tmp/mynewfile'</span>)\n\n<span class=hljs-comment>// copy directory, even if it has subdirectories or files</span>\nfs.copySync(<span class=hljs-string>'/tmp/mydir'</span>, <span class=hljs-string>'/tmp/mynewdir'</span>)\n\n<span class=hljs-comment>// 支持过滤</span>\n<span class=hljs-keyword>const</span> filterFunc = <span class=hljs-function>(<span class=hljs-params>src, dest</span>) =&gt;</span> {\n  <span class=hljs-comment>// your logic here</span>\n  <span class=hljs-comment>// it will be copied if return true</span>\n}\nfs.copySync(<span class=hljs-string>'/tmp/mydir'</span>, <span class=hljs-string>'/tmp/mynewdir'</span>, { <span class=hljs-attr>filter</span>: filterFunc })\n</code></pre></section></section><section><h1 id=\"node 模块收集\" data-index=13>node 模块收集</h1><section><h2 id=\"server 相关\" data-index=14>server 相关</h2><section><h3 id=\"node-portfinder 可自动获取可以端口\" data-index=15>node-portfinder 可自动获取可以端口</h3><p><a href=https://github.com/indexzero/node-portfinder>node-portfinder</a></p></section><section><h3 id=\"node-ip 可获取本机ip地址\" data-index=16>node-ip 可获取本机ip地址</h3><p><a href=https://github.com/indutny/node-ip>https://github.com/indutny/node-ip</a></p><pre><code class=lang-js>ip.address() <span class=hljs-comment>// 可局域网访问的本机ip</span>\n</code></pre></section></section><section><h2 id=\"cli 参数获取\" data-index=17>cli 参数获取</h2><p><a href=https://github.com/yargs/yargs>yargs</a></p></section></section><section><h1 id=\"nodejs 端口占用\" data-index=18>nodejs 端口占用</h1><p><a href=https://segmentfault.com/a/1190000004915782>Nodejs检测端口是否被占用</a></p></section><section><h1 id=path data-index=19>path</h1><section><h2 id=路径信息 data-index=20>路径信息</h2><pre><code class=lang-js><span class=hljs-keyword>let</span> info = path.parse(<span class=hljs-string>'./dir/index.js'</span>)\n\ninfo.ext <span class=hljs-comment>// 扩展名，如果是目录，则为空字符串</span>\n</code></pre></section></section><section><h1 id=获取本机IP data-index=21>获取本机IP</h1><pre><code class=lang-js><span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>getIPAdress</span>(<span class=hljs-params></span>)</span>{  \n    <span class=hljs-keyword>var</span> interfaces = <span class=hljs-built_in>require</span>(<span class=hljs-string>'os'</span>).networkInterfaces();  \n    <span class=hljs-keyword>for</span>(<span class=hljs-keyword>var</span> devName <span class=hljs-keyword>in</span> interfaces){  \n          <span class=hljs-keyword>var</span> iface = interfaces[devName];  \n          <span class=hljs-keyword>for</span>(<span class=hljs-keyword>var</span> i=<span class=hljs-number>0</span>;i&lt;iface.length;i++){  \n               <span class=hljs-keyword>var</span> alias = iface[i];  \n               <span class=hljs-keyword>if</span>(alias.family === <span class=hljs-string>'IPv4'</span> &amp;&amp; alias.address !== <span class=hljs-string>'127.0.0.1'</span> &amp;&amp; !alias.internal){  \n                     <span class=hljs-keyword>return</span> alias.address;  \n               }  \n          }  \n    }  \n}\n</code></pre></section>","menu":"<div class=\"menu-item fold\"><div class=\"item\" data-index=\"0\"><i class=\"\"></i><span class=\"txt\">fs</span></div><div class=\"list\"><div class=\"menu-item fold\"><div class=\"item\" data-index=\"1\"><i class=\"\"></i><span class=\"txt\">文件列表(包括文件夹)</span></div><div class=\"list\"><div class=\"menu-item fold\"><div class=\"item\" data-index=\"2\"><i class=\"hidden\"></i><span class=\"txt\">原生 readdir：只能当前目录，不寻找下级</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"3\"><i class=\"hidden\"></i><span class=\"txt\">读取指定目录下的所有文件，支持过滤</span></div><div class=\"list\"></div></div></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"4\"><i class=\"hidden\"></i><span class=\"txt\">是不是目录</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"5\"><i class=\"hidden\"></i><span class=\"txt\">读取文件 fs.readFile</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"6\"><i class=\"hidden\"></i><span class=\"txt\">判断路径是否存在 fs.exists(path)</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"7\"><i class=\"hidden\"></i><span class=\"txt\">改名(文件名，目录名)</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"8\"><i class=\"\"></i><span class=\"txt\">删除</span></div><div class=\"list\"><div class=\"menu-item fold\"><div class=\"item\" data-index=\"9\"><i class=\"hidden\"></i><span class=\"txt\">标准删</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"10\"><i class=\"hidden\"></i><span class=\"txt\">递归删：第三方扩展</span></div><div class=\"list\"></div></div></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"11\"><i class=\"hidden\"></i><span class=\"txt\">写文件</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"12\"><i class=\"hidden\"></i><span class=\"txt\">copy</span></div><div class=\"list\"></div></div></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"13\"><i class=\"\"></i><span class=\"txt\">node 模块收集</span></div><div class=\"list\"><div class=\"menu-item fold\"><div class=\"item\" data-index=\"14\"><i class=\"\"></i><span class=\"txt\">server 相关</span></div><div class=\"list\"><div class=\"menu-item fold\"><div class=\"item\" data-index=\"15\"><i class=\"hidden\"></i><span class=\"txt\">node-portfinder 可自动获取可以端口</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"16\"><i class=\"hidden\"></i><span class=\"txt\">node-ip 可获取本机ip地址</span></div><div class=\"list\"></div></div></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"17\"><i class=\"hidden\"></i><span class=\"txt\">cli 参数获取</span></div><div class=\"list\"></div></div></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"18\"><i class=\"hidden\"></i><span class=\"txt\">nodejs 端口占用</span></div><div class=\"list\"></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"19\"><i class=\"\"></i><span class=\"txt\">path</span></div><div class=\"list\"><div class=\"menu-item fold\"><div class=\"item\" data-index=\"20\"><i class=\"hidden\"></i><span class=\"txt\">路径信息</span></div><div class=\"list\"></div></div></div></div><div class=\"menu-item fold\"><div class=\"item\" data-index=\"21\"><i class=\"hidden\"></i><span class=\"txt\">获取本机IP</span></div><div class=\"list\"></div></div>"}