
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title></title>
    <meta charset="UTF-8">
    <meta content="width=device-width,initial-scale=1.0,user-scalable=no" name="viewport" />

    <style>
        body {
            margin: 0;
            overflow: visible;
        }

        .red-packet-index {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
            overflow: hidden;
            /*height:100px;
            width:100px;*/
        }

        .red-packet-index .bg {
            -webkit-animation-name: a1;
            animation-name: a1;
            -webkit-animation-duration: 10s;
            animation-duration: 10s;
            -webkit-animation-timing-function: linear;
            animation-timing-function: linear;
            -webkit-animation-iteration-count: infinite;
            animation-iteration-count: infinite;
            -webkit-animation-direction: normal;
            animation-direction: normal;
            width: 824px;
            height: 1464px;
            position: relative;
            background: #fff28c url(imgs/light-ray.png) center center;
            background-size: auto 70%;
        }

        .red-packet-index .bg2 {
            -webkit-animation-name: a2;
            animation-name: a2;
            -webkit-animation-duration: 1.4s;
            animation-duration: 1.4s;
            -webkit-animation-timing-function: linear;
            animation-timing-function: linear;
            -webkit-animation-iteration-count: infinite;
            animation-iteration-count: infinite;
            -webkit-animation-direction: alternate;
            animation-direction: alternate;
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
            background: url(imgs/light.png) center center no-repeat;
            background-size: 100% auto;
        }

        .red-packet-index .btm .b1 {
            -webkit-animation-name: a4;
            animation-name: a4;
            -webkit-animation-duration: 1.4s;
            animation-duration: 1.4s;
            -webkit-animation-timing-function: linear;
            animation-timing-function: linear;
            -webkit-animation-iteration-count: infinite;
            animation-iteration-count: infinite;
            -webkit-animation-direction: normal;
            animation-direction: normal;
            position: absolute;
            bottom: 0;
            width: 120%;
            height: 21px;
            margin-left: -20%;
            background: url(imgs/b-bg.png) 0 0;
            background-size: auto 21px;
        }

        .red-packet-index .btm .b2 {
            -webkit-animation-name: a3;
            animation-name: a3;
            -webkit-animation-duration: 1.4s;
            animation-duration: 1.4s;
            -webkit-animation-timing-function: linear;
            animation-timing-function: linear;
            -webkit-animation-iteration-count: infinite;
            animation-iteration-count: infinite;
            -webkit-animation-direction: normal;
            animation-direction: normal;
            position: absolute;
            bottom: 2px;
            width: 120%;
            height: 26px;
            margin-left: -20%;
            background: url(imgs/b-bg2.png) 0 0;
            background-size: 25px auto;
        }

        .red-packet-index .btm > img {
            position: absolute;
            left:10px;
            bottom: 6px;
            width: 21px;
        }

        .red-packet-index .btm .b-txt {
            position: absolute;
            bottom: 36px;
            width: 100%;
            padding-top:36%;
            background: url(imgs/b-txt.png) center center no-repeat;
            background-size: 94% auto;
        }

        .red-packet-index .btm .b-txt img {
            width: 50px;
            position: absolute;
            top: 30%;
            left: 71%;
            -webkit-animation-name: finger;
            animation-name: finger;
            -webkit-animation-duration: 0.4s;
            animation-duration: 0.4s;
            -webkit-animation-timing-function: linear;
            animation-timing-function: linear;
            -webkit-animation-iteration-count: infinite;
            animation-iteration-count: infinite;
            -webkit-animation-direction: alternate;
            animation-direction: alternate;
        }

        .red-packet-index .btm .b-txt a {
            position: absolute;
            position: absolute;
            top: 0;
            left: 61%;
            width: 23%;
            padding-top: 24%;
            border-radius: 50%;
        }

        .red-packet-index .btm .b-txt a:active {
            background: rgba(0, 0, 0, 0.3);
        }

        .red-packet-index .mid {
            position: absolute;
            top: 4%;
            bottom: 50px;
            width: 100%;
            text-align: center;
        }

        .red-packet-index .mid .big-packet {
            max-width: 86%;
            max-height: 86%;
        }

        .red-packet-index .mid .other {
            position: absolute;
            left: 4%;
            top: 75%;
            width: 26%;
        }

        .red-packet-index .main {
            position: absolute;
            top: 60%;
            width: 100%;
            color: #fff;
            font-size: 16px;
        }

        .red-packet-index .main span {
            border: 0;
            height: 34px;
            color: #000;
            background-color: #ffd842;
            border-radius: 5px;
            padding: 10px 22px;
            text-decoration: none;
        }

        @-webkit-keyframes a1 {
            0% {
                -webkit-transform: rotate(0deg);
                transform: rotate(0deg);
            }

            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }

        @-webkit-keyframes a2 {
            0% {
                opacity: 0.2;
            }

            100% {
                opacity: 1;
            }
        }

        @-webkit-keyframes a3 {
            0% {
                -webkit-transform: translate3d(0,0,0);
                transform: translate3d(0,0,0);
            }

            100% {
                -webkit-transform: translate3d(25px,0,0);
                transform: translate3d(25px,0,0);
            }
        }

        @-webkit-keyframes a4 {
            0% {
                -webkit-transform: translate3d(25px,0,0);
                transform: translate3d(25px,0,0);
            }

            100% {
                -webkit-transform: translate3d(0,0,0);
                transform: translate3d(0,0,0);
            }
        }

        @-webkit-keyframes finger {
            0% {
                -webkit-transform: scale(1.4,1.4);
                transform: scale(1.4,1.4);
                opacity: 0;
            }

            60% {
                -webkit-transform: scale(1,1);
                transform: scale(1,1);
                opacity: 1;
            }

            100% {
                -webkit-transform: scale(1,1);
                transform: scale(1,1);
                /*opacity:1;*/
            }
        }
    </style>
</head>
<body>
    <div class="red-packet-index">

        <div class="bg"></div>
        <div class="bg2"></div>

        <div class="mid">
            <img class="big-packet" src="imgs/big-packet.png" />
            <img class="other" src="imgs/ohter.png" />
            <div class="main">
                <span id="awardName">???</span>
                <p>请在历史红包查看您的奖品</p>
            </div>
        </div>

        <div class="btm">
            <div class="b2"></div>
            <img class="m1" src="imgs/red-packet.png" />
            <img src="imgs/red-packet.png" />
            <img src="imgs/red-packet.png" style="left:30%" />
            <img src="imgs/red-packet.png" style="left:40%;bottom:4px" />
            <img src="imgs/red-packet.png" style="left:70%" />
            <img src="imgs/red-packet.png" style="left:75%;bottom:3px" />
            <div class="b1"></div>
            <div class="b-txt">
                <img src="imgs/finger.png" />
                <a id="goStepRed"></a>
            </div>
        </div>
    </div>
    <script>
        var eBox = document.querySelector('.red-packet-index')
            , bg = eBox.children[0]
            , bg2 = eBox.children[1]
            , boxW = eBox.clientWidth
            , boxH = eBox.clientHeight

            , maxWOH = (boxW > boxH ? boxW : boxH) * 2;

        bg.style.width = bg.style.height = maxWOH + 'px';

        bg.style.left = (boxW - maxWOH) / 2 + 'px';
        bg.style.top = (boxH - maxWOH) / 1.5 + 'px';

        var c = {};

        c.each = function (arr, fn) {
            for (var i = 0, len = arr.length; i < len; i++) {
                if (fn(i, arr[i], len) === false) {
                    break;
                }
            }
        };

        c.deviceName = function () {
            var names = ['Android', 'iPhone'],
                userAgent = window.navigator.userAgent,
                deviceName = '';


            c.each(names, function (i, n) {

                if (userAgent.indexOf(n) > -1) {
                    deviceName = n;
                    return false;
                }

            });

            return deviceName;

        }();

        c.bindClick = function (elem, fn) {
            var
                touchcancel,
                outmoded = c.deviceName === 'iPhone';

            if (outmoded) {
                elem.addEventListener('touchend', touchend);
                elem.addEventListener('touchstart', touchstart);
                elem.addEventListener('touchmove', touchmove);
            }
            else {
                elem.addEventListener('click', fn);
            }

            return function () {
                if (outmoded) {
                    elem.removeEventListener('touchend', touchend);
                    elem.removeEventListener('touchstart', touchstart);
                    elem.removeEventListener('touchmove', touchmove);
                }
                else {
                    elem.removeEventListener('click', fn);
                }
            };

            function touchend(e) {
                if (touchcancel) return;
                fn.call(this, e);
            }
            function touchstart() {
                touchcancel = false;
            }
            function touchmove() {
                touchcancel = true;
            }
        };

        var excu = function () {
            if (c.deviceName === 'Android') {
                return function () {
                    jsRed.goStepRed();
                };
            }
            else if (c.deviceName === 'iPhone') {
                return function () {
                    location.href = 'goStepRed:1';
                };
            }
        }();

        c.bindClick(document.getElementById('goStepRed'), function (e) {
            excu();
            e.preventDefault();
        });

        function transmitRedData(d) {
            document.getElementById('awardName').innerHTML = d;
        }
    </script>
</body>

</html>
