<!DOCTYPE html>
<html>
<head>

    <title>__</title>
    <meta charset="utf-8">
    <style>
        .box {

            width: 100px;
            height: 100px;
            background-color: #8de638;
            position: relative;
            top: 0;
        }

    </style>
    <!--<script src="../../../../$admin/Desktop/wtData_v2.js"></script>-->

</head>
<body>


<div class="box">
    点我
</div>

<!--<script src="http://weather.gtimg.cn/city/01010715.js"></script>-->

<script charset="gb2312">


    /*

     腾讯
     http://weather.gtimg.cn/city/01010715.js
     http://weather.gtimg.cn/aqi/01010715.json?callback=city&_=1480565000407

     360
     http://cdn.weather.hao.360.cn/api_weather_info.php?app=hao360&_jsonp=sg_wt_cb&code=101190101


     搜狗
     http://123.sogou.com/get123.php?block=wt&ver=v32&city=CN110100

     */


    var c = {};


    c.loadScript = function (params) {
        var src = params.src,
            callback = params.callback || function () {
                },
            charset = params.charset || 'utf-8',

            script = document.createElement('script');

        script.type = "text/javascript";
        script.charset = charset;
        script.src = src;
        script.onload = callback;

        document.head.appendChild(script);
    };


    c.loadScript({
        src: 'http://weather.gtimg.cn/city/01010715.js',
        charset: 'gb2312',
        callback: function () {
            document.querySelector('.box').innerHTML = '';

            var wInfo = __weather_city;

            console.log(__weather_city.sk_wt);
        }
    });


    function get(params) {

        var
            url = params.url,
            data = params.data,
            //contentType = params.contentType || 'application/x-www-form-urlencoded',
            dataType = params.dataType || 'json',
            success = params.success || function () {
                },
            error = params.error || function () {
                },
            complete = params.complete || function () {
                },

            xhr = new XMLHttpRequest();

        xhr.responseType = dataType;

        xhr.addEventListener('readystatechange', onReadystatechange, false);

        xhr.open('get', url);// + dataStringify(data));

        //xhr.setRequestHeader("Content-type", contentType + ";charset=utf-8");

        xhr.send(null);

        return xhr;

        function onReadystatechange() {
            if (xhr.readyState === 4) {

                if (xhr.status === 200) {
                    success(xhr.response);
                } else {
                    error(xhr, xhr.status, arguments);
                }

                complete();
            }
        }

        function dataStringify(data) {
            var buildFormData = json.formData;
            if (data) {
                data = '?' + buildFormData(data);
            } else {
                data = '';
            }

            return data;
        }
    }
    ;

</script>


</body>
</html>